/*! (c) gotoAndPlay | All rights reserved */
(window["webpackJsonpapplication"] = window["webpackJsonpapplication"] || []).push([["module-1"],{

/***/ "./node_modules/moment/locale sync recursive ^\\.\\/.*$":
/*!**************************************************!*\
  !*** ./node_modules/moment/locale sync ^\.\/.*$ ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "./node_modules/moment/locale/af.js",
	"./af.js": "./node_modules/moment/locale/af.js",
	"./ar": "./node_modules/moment/locale/ar.js",
	"./ar-dz": "./node_modules/moment/locale/ar-dz.js",
	"./ar-dz.js": "./node_modules/moment/locale/ar-dz.js",
	"./ar-kw": "./node_modules/moment/locale/ar-kw.js",
	"./ar-kw.js": "./node_modules/moment/locale/ar-kw.js",
	"./ar-ly": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ly.js": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ma": "./node_modules/moment/locale/ar-ma.js",
	"./ar-ma.js": "./node_modules/moment/locale/ar-ma.js",
	"./ar-sa": "./node_modules/moment/locale/ar-sa.js",
	"./ar-sa.js": "./node_modules/moment/locale/ar-sa.js",
	"./ar-tn": "./node_modules/moment/locale/ar-tn.js",
	"./ar-tn.js": "./node_modules/moment/locale/ar-tn.js",
	"./ar.js": "./node_modules/moment/locale/ar.js",
	"./az": "./node_modules/moment/locale/az.js",
	"./az.js": "./node_modules/moment/locale/az.js",
	"./be": "./node_modules/moment/locale/be.js",
	"./be.js": "./node_modules/moment/locale/be.js",
	"./bg": "./node_modules/moment/locale/bg.js",
	"./bg.js": "./node_modules/moment/locale/bg.js",
	"./bm": "./node_modules/moment/locale/bm.js",
	"./bm.js": "./node_modules/moment/locale/bm.js",
	"./bn": "./node_modules/moment/locale/bn.js",
	"./bn.js": "./node_modules/moment/locale/bn.js",
	"./bo": "./node_modules/moment/locale/bo.js",
	"./bo.js": "./node_modules/moment/locale/bo.js",
	"./br": "./node_modules/moment/locale/br.js",
	"./br.js": "./node_modules/moment/locale/br.js",
	"./bs": "./node_modules/moment/locale/bs.js",
	"./bs.js": "./node_modules/moment/locale/bs.js",
	"./ca": "./node_modules/moment/locale/ca.js",
	"./ca.js": "./node_modules/moment/locale/ca.js",
	"./cs": "./node_modules/moment/locale/cs.js",
	"./cs.js": "./node_modules/moment/locale/cs.js",
	"./cv": "./node_modules/moment/locale/cv.js",
	"./cv.js": "./node_modules/moment/locale/cv.js",
	"./cy": "./node_modules/moment/locale/cy.js",
	"./cy.js": "./node_modules/moment/locale/cy.js",
	"./da": "./node_modules/moment/locale/da.js",
	"./da.js": "./node_modules/moment/locale/da.js",
	"./de": "./node_modules/moment/locale/de.js",
	"./de-at": "./node_modules/moment/locale/de-at.js",
	"./de-at.js": "./node_modules/moment/locale/de-at.js",
	"./de-ch": "./node_modules/moment/locale/de-ch.js",
	"./de-ch.js": "./node_modules/moment/locale/de-ch.js",
	"./de.js": "./node_modules/moment/locale/de.js",
	"./dv": "./node_modules/moment/locale/dv.js",
	"./dv.js": "./node_modules/moment/locale/dv.js",
	"./el": "./node_modules/moment/locale/el.js",
	"./el.js": "./node_modules/moment/locale/el.js",
	"./en-SG": "./node_modules/moment/locale/en-SG.js",
	"./en-SG.js": "./node_modules/moment/locale/en-SG.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./eo": "./node_modules/moment/locale/eo.js",
	"./eo.js": "./node_modules/moment/locale/eo.js",
	"./es": "./node_modules/moment/locale/es.js",
	"./es-do": "./node_modules/moment/locale/es-do.js",
	"./es-do.js": "./node_modules/moment/locale/es-do.js",
	"./es-us": "./node_modules/moment/locale/es-us.js",
	"./es-us.js": "./node_modules/moment/locale/es-us.js",
	"./es.js": "./node_modules/moment/locale/es.js",
	"./et": "./node_modules/moment/locale/et.js",
	"./et.js": "./node_modules/moment/locale/et.js",
	"./eu": "./node_modules/moment/locale/eu.js",
	"./eu.js": "./node_modules/moment/locale/eu.js",
	"./fa": "./node_modules/moment/locale/fa.js",
	"./fa.js": "./node_modules/moment/locale/fa.js",
	"./fi": "./node_modules/moment/locale/fi.js",
	"./fi.js": "./node_modules/moment/locale/fi.js",
	"./fo": "./node_modules/moment/locale/fo.js",
	"./fo.js": "./node_modules/moment/locale/fo.js",
	"./fr": "./node_modules/moment/locale/fr.js",
	"./fr-ca": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ca.js": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ch": "./node_modules/moment/locale/fr-ch.js",
	"./fr-ch.js": "./node_modules/moment/locale/fr-ch.js",
	"./fr.js": "./node_modules/moment/locale/fr.js",
	"./fy": "./node_modules/moment/locale/fy.js",
	"./fy.js": "./node_modules/moment/locale/fy.js",
	"./ga": "./node_modules/moment/locale/ga.js",
	"./ga.js": "./node_modules/moment/locale/ga.js",
	"./gd": "./node_modules/moment/locale/gd.js",
	"./gd.js": "./node_modules/moment/locale/gd.js",
	"./gl": "./node_modules/moment/locale/gl.js",
	"./gl.js": "./node_modules/moment/locale/gl.js",
	"./gom-latn": "./node_modules/moment/locale/gom-latn.js",
	"./gom-latn.js": "./node_modules/moment/locale/gom-latn.js",
	"./gu": "./node_modules/moment/locale/gu.js",
	"./gu.js": "./node_modules/moment/locale/gu.js",
	"./he": "./node_modules/moment/locale/he.js",
	"./he.js": "./node_modules/moment/locale/he.js",
	"./hi": "./node_modules/moment/locale/hi.js",
	"./hi.js": "./node_modules/moment/locale/hi.js",
	"./hr": "./node_modules/moment/locale/hr.js",
	"./hr.js": "./node_modules/moment/locale/hr.js",
	"./hu": "./node_modules/moment/locale/hu.js",
	"./hu.js": "./node_modules/moment/locale/hu.js",
	"./hy-am": "./node_modules/moment/locale/hy-am.js",
	"./hy-am.js": "./node_modules/moment/locale/hy-am.js",
	"./id": "./node_modules/moment/locale/id.js",
	"./id.js": "./node_modules/moment/locale/id.js",
	"./is": "./node_modules/moment/locale/is.js",
	"./is.js": "./node_modules/moment/locale/is.js",
	"./it": "./node_modules/moment/locale/it.js",
	"./it-ch": "./node_modules/moment/locale/it-ch.js",
	"./it-ch.js": "./node_modules/moment/locale/it-ch.js",
	"./it.js": "./node_modules/moment/locale/it.js",
	"./ja": "./node_modules/moment/locale/ja.js",
	"./ja.js": "./node_modules/moment/locale/ja.js",
	"./jv": "./node_modules/moment/locale/jv.js",
	"./jv.js": "./node_modules/moment/locale/jv.js",
	"./ka": "./node_modules/moment/locale/ka.js",
	"./ka.js": "./node_modules/moment/locale/ka.js",
	"./kk": "./node_modules/moment/locale/kk.js",
	"./kk.js": "./node_modules/moment/locale/kk.js",
	"./km": "./node_modules/moment/locale/km.js",
	"./km.js": "./node_modules/moment/locale/km.js",
	"./kn": "./node_modules/moment/locale/kn.js",
	"./kn.js": "./node_modules/moment/locale/kn.js",
	"./ko": "./node_modules/moment/locale/ko.js",
	"./ko.js": "./node_modules/moment/locale/ko.js",
	"./ku": "./node_modules/moment/locale/ku.js",
	"./ku.js": "./node_modules/moment/locale/ku.js",
	"./ky": "./node_modules/moment/locale/ky.js",
	"./ky.js": "./node_modules/moment/locale/ky.js",
	"./lb": "./node_modules/moment/locale/lb.js",
	"./lb.js": "./node_modules/moment/locale/lb.js",
	"./lo": "./node_modules/moment/locale/lo.js",
	"./lo.js": "./node_modules/moment/locale/lo.js",
	"./lt": "./node_modules/moment/locale/lt.js",
	"./lt.js": "./node_modules/moment/locale/lt.js",
	"./lv": "./node_modules/moment/locale/lv.js",
	"./lv.js": "./node_modules/moment/locale/lv.js",
	"./me": "./node_modules/moment/locale/me.js",
	"./me.js": "./node_modules/moment/locale/me.js",
	"./mi": "./node_modules/moment/locale/mi.js",
	"./mi.js": "./node_modules/moment/locale/mi.js",
	"./mk": "./node_modules/moment/locale/mk.js",
	"./mk.js": "./node_modules/moment/locale/mk.js",
	"./ml": "./node_modules/moment/locale/ml.js",
	"./ml.js": "./node_modules/moment/locale/ml.js",
	"./mn": "./node_modules/moment/locale/mn.js",
	"./mn.js": "./node_modules/moment/locale/mn.js",
	"./mr": "./node_modules/moment/locale/mr.js",
	"./mr.js": "./node_modules/moment/locale/mr.js",
	"./ms": "./node_modules/moment/locale/ms.js",
	"./ms-my": "./node_modules/moment/locale/ms-my.js",
	"./ms-my.js": "./node_modules/moment/locale/ms-my.js",
	"./ms.js": "./node_modules/moment/locale/ms.js",
	"./mt": "./node_modules/moment/locale/mt.js",
	"./mt.js": "./node_modules/moment/locale/mt.js",
	"./my": "./node_modules/moment/locale/my.js",
	"./my.js": "./node_modules/moment/locale/my.js",
	"./nb": "./node_modules/moment/locale/nb.js",
	"./nb.js": "./node_modules/moment/locale/nb.js",
	"./ne": "./node_modules/moment/locale/ne.js",
	"./ne.js": "./node_modules/moment/locale/ne.js",
	"./nl": "./node_modules/moment/locale/nl.js",
	"./nl-be": "./node_modules/moment/locale/nl-be.js",
	"./nl-be.js": "./node_modules/moment/locale/nl-be.js",
	"./nl.js": "./node_modules/moment/locale/nl.js",
	"./nn": "./node_modules/moment/locale/nn.js",
	"./nn.js": "./node_modules/moment/locale/nn.js",
	"./pa-in": "./node_modules/moment/locale/pa-in.js",
	"./pa-in.js": "./node_modules/moment/locale/pa-in.js",
	"./pl": "./node_modules/moment/locale/pl.js",
	"./pl.js": "./node_modules/moment/locale/pl.js",
	"./pt": "./node_modules/moment/locale/pt.js",
	"./pt-br": "./node_modules/moment/locale/pt-br.js",
	"./pt-br.js": "./node_modules/moment/locale/pt-br.js",
	"./pt.js": "./node_modules/moment/locale/pt.js",
	"./ro": "./node_modules/moment/locale/ro.js",
	"./ro.js": "./node_modules/moment/locale/ro.js",
	"./ru": "./node_modules/moment/locale/ru.js",
	"./ru.js": "./node_modules/moment/locale/ru.js",
	"./sd": "./node_modules/moment/locale/sd.js",
	"./sd.js": "./node_modules/moment/locale/sd.js",
	"./se": "./node_modules/moment/locale/se.js",
	"./se.js": "./node_modules/moment/locale/se.js",
	"./si": "./node_modules/moment/locale/si.js",
	"./si.js": "./node_modules/moment/locale/si.js",
	"./sk": "./node_modules/moment/locale/sk.js",
	"./sk.js": "./node_modules/moment/locale/sk.js",
	"./sl": "./node_modules/moment/locale/sl.js",
	"./sl.js": "./node_modules/moment/locale/sl.js",
	"./sq": "./node_modules/moment/locale/sq.js",
	"./sq.js": "./node_modules/moment/locale/sq.js",
	"./sr": "./node_modules/moment/locale/sr.js",
	"./sr-cyrl": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr-cyrl.js": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr.js": "./node_modules/moment/locale/sr.js",
	"./ss": "./node_modules/moment/locale/ss.js",
	"./ss.js": "./node_modules/moment/locale/ss.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js",
	"./sw": "./node_modules/moment/locale/sw.js",
	"./sw.js": "./node_modules/moment/locale/sw.js",
	"./ta": "./node_modules/moment/locale/ta.js",
	"./ta.js": "./node_modules/moment/locale/ta.js",
	"./te": "./node_modules/moment/locale/te.js",
	"./te.js": "./node_modules/moment/locale/te.js",
	"./tet": "./node_modules/moment/locale/tet.js",
	"./tet.js": "./node_modules/moment/locale/tet.js",
	"./tg": "./node_modules/moment/locale/tg.js",
	"./tg.js": "./node_modules/moment/locale/tg.js",
	"./th": "./node_modules/moment/locale/th.js",
	"./th.js": "./node_modules/moment/locale/th.js",
	"./tl-ph": "./node_modules/moment/locale/tl-ph.js",
	"./tl-ph.js": "./node_modules/moment/locale/tl-ph.js",
	"./tlh": "./node_modules/moment/locale/tlh.js",
	"./tlh.js": "./node_modules/moment/locale/tlh.js",
	"./tr": "./node_modules/moment/locale/tr.js",
	"./tr.js": "./node_modules/moment/locale/tr.js",
	"./tzl": "./node_modules/moment/locale/tzl.js",
	"./tzl.js": "./node_modules/moment/locale/tzl.js",
	"./tzm": "./node_modules/moment/locale/tzm.js",
	"./tzm-latn": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm-latn.js": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm.js": "./node_modules/moment/locale/tzm.js",
	"./ug-cn": "./node_modules/moment/locale/ug-cn.js",
	"./ug-cn.js": "./node_modules/moment/locale/ug-cn.js",
	"./uk": "./node_modules/moment/locale/uk.js",
	"./uk.js": "./node_modules/moment/locale/uk.js",
	"./ur": "./node_modules/moment/locale/ur.js",
	"./ur.js": "./node_modules/moment/locale/ur.js",
	"./uz": "./node_modules/moment/locale/uz.js",
	"./uz-latn": "./node_modules/moment/locale/uz-latn.js",
	"./uz-latn.js": "./node_modules/moment/locale/uz-latn.js",
	"./uz.js": "./node_modules/moment/locale/uz.js",
	"./vi": "./node_modules/moment/locale/vi.js",
	"./vi.js": "./node_modules/moment/locale/vi.js",
	"./x-pseudo": "./node_modules/moment/locale/x-pseudo.js",
	"./x-pseudo.js": "./node_modules/moment/locale/x-pseudo.js",
	"./yo": "./node_modules/moment/locale/yo.js",
	"./yo.js": "./node_modules/moment/locale/yo.js",
	"./zh-cn": "./node_modules/moment/locale/zh-cn.js",
	"./zh-cn.js": "./node_modules/moment/locale/zh-cn.js",
	"./zh-hk": "./node_modules/moment/locale/zh-hk.js",
	"./zh-hk.js": "./node_modules/moment/locale/zh-hk.js",
	"./zh-tw": "./node_modules/moment/locale/zh-tw.js",
	"./zh-tw.js": "./node_modules/moment/locale/zh-tw.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive ^\\.\\/.*$";

/***/ }),

/***/ "./src/data/banned-user.js":
/*!*********************************!*\
  !*** ./src/data/banned-user.js ***!
  \*********************************/
/*! exports provided: BannedUser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BannedUser", function() { return BannedUser; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);


class BannedUser
{
	constructor(name, zone)
	{
		this.DATE_FORMAT = 'DD/MM/YYYY HH:mm';

	    this.name = name;
		this.zone = zone;
	}

	static fromSFSArray(sfsa)
	{
		let bu = new BannedUser(sfsa.getUtfString(0), sfsa.getUtfString(1));

		bu.mode = sfsa.getUtfString(2);
		bu.reason = sfsa.getUtfString(3);
		bu.adminName = sfsa.getUtfString(4);
		bu.ipAddress = sfsa.getUtfString(5);
		bu.banTimeMillis = sfsa.getLong(6);
		bu.banDurationMillis = sfsa.getLong(7);
		bu.expirationDate = bu._getExpirationDate();
		bu.banDate = bu._getBanDate();

		return bu;
	}

	_getExpirationDate()
	{
		const expireOn = moment__WEBPACK_IMPORTED_MODULE_0__(this.banTimeMillis + this.banDurationMillis);

		if (expireOn.year() >= moment__WEBPACK_IMPORTED_MODULE_0__().year() + 100)
			return 'Never';
		else
			return expireOn.format(this.DATE_FORMAT);
	}

	_getBanDate()
	{
		return moment__WEBPACK_IMPORTED_MODULE_0__(this.banTimeMillis).format(this.DATE_FORMAT);
	}
}


/***/ }),

/***/ "./src/modules/ban-manager.js":
/*!************************************!*\
  !*** ./src/modules/ban-manager.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return BanManager; });
/* harmony import */ var _base_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base-module */ "./src/modules/base-module.js");
/* harmony import */ var _data_banned_user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../data/banned-user */ "./src/data/banned-user.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var clipboard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! clipboard */ "./node_modules/clipboard/dist/clipboard.js");
/* harmony import */ var clipboard__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(clipboard__WEBPACK_IMPORTED_MODULE_3__);





class BanManager extends _base_module__WEBPACK_IMPORTED_MODULE_0__["BaseModule"]
{
	constructor()
	{
	    super('banManager');

		// Outgoing requests
		this.REQ_GET_ZONES = 'getZones';
		this.REQ_GET_USERNAMES = 'getUNames';
		this.REQ_GET_IPADDRESSES = 'getIPs';
		this.REQ_REMOVE_USERNAMES = 'removeUNames';
		this.REQ_REMOVE_IPADDRESSES = 'removeIPs';
		this.REQ_BAN = 'ban';

		// Incoming responses
		this.RESP_ZONES = 'zones';
		this.RESP_USERNAMES = 'uNames';
		this.RESP_IPADDRESSES = 'IPs';
	}

	//------------------------------------
	// COMMON MODULE INTERFACE METHODS
	// This members are used by the main controller
	// to communicate with the module's controller.
	//------------------------------------

	initialize(idData, shellController)
	{
		// Call super method
		super.initialize(idData, shellController);

		// Initialize scrolling tabs
		$('#bnm-tabNavigator > #tabs').scrollingTabs({
			bootstrapVersion: 4,
			scrollToTabEdge: true,
			enableSwiping: true,
			disableScrollArrowsOnFullyScrolled: true,
			cssClassLeftArrow: 'fa fa-chevron-left',
			cssClassRightArrow: 'fa fa-chevron-right'
		});

		// Initialize zone filter dropdown
		this._zonesDD = $('#bnm-zonesDD').kendoDropDownList({
			change: $.proxy(this._onZoneChange, this)
		}).data('kendoDropDownList');

		// Initialize ban button
		$('#bnm-showBanModalBt').on('click', $.proxy(this._onShowBanModalClick, this));

		// Initialize banned IPs grid
		this._ipGrid = $('#bnm-ipGrid').kendoGrid({
			scrollable: true,
            sortable: true,
			//resizable: true,
			selectable: 'multiple',
			allowCopy: true,
            columns:
            [
				{
	                field: 'ipAddress',
	                width: 150,
					title: 'IP Address',
	            },
	            {
	                field: 'banDate',
	                width: 120,
	                title: 'Date',
					format: '{0:dd/MM/yyyy HH:mm}',
					type: 'dateTime'
	            },
	            {
	                field: 'expirationDate',
	                width: 120,
	                title: 'Expiration',
					format: '{0:dd/MM/yyyy HH:mm}',
					type: 'dateTime'
	            },
				{
	                field: 'reason',
	                width: 250,
					title: 'Reason',
	            },
				{
	                field: 'adminName',
	                width: 150,
					title: 'Banned By',
	            },
			],
			noRecords: {
				template: 'No banned IP addresses.'
			},
			change: $.proxy(this._onIpGridSelectionChange, this),
			dataSource: []
        }).data('kendoGrid');

		// Initialize banned usernames grid
		this._namesGrid = $('#bnm-namesGrid').kendoGrid({
			scrollable: true,
            sortable: true,
			//resizable: true,
			selectable: 'multiple',
			allowCopy: true,
            columns:
            [
				{
	                field: 'name',
	                width: 150,
					title: 'Username',
	            },
				{
	                field: 'banDate',
	                width: 120,
	                title: 'Date',
					format: '{0:dd/MM/yyyy HH:mm}',
					type: 'dateTime'
	            },
	            {
	                field: 'expirationDate',
	                width: 120,
	                title: 'Expiration',
					format: '{0:dd/MM/yyyy HH:mm}',
					type: 'dateTime'
	            },
				{
	                field: 'reason',
	                width: 250,
					title: 'Reason',
	            },
				{
	                field: 'adminName',
	                width: 150,
					title: 'Banned By',
	            },
			],
			noRecords: {
				template: 'No banned usernames.'
			},
			change: $.proxy(this._onNamesGridSelectionChange, this),
			dataSource: []
        }).data('kendoGrid');

		// Initialize context menus
		$("#bnm-namesGridContextMenu").kendoContextMenu({
            target: '#bnm-namesGrid',
            filter: 'td',
            select: function (e) {
                var cell = e.target;
                var row = $(cell).parent()[0];
                var grid = $('#bnm-namesGrid').data('kendoGrid');
                var itemId = e.item.id;

                var cellText = cell.innerText;

                if (itemId === 'bnm-namesGridCopyText') {
                    new clipboard__WEBPACK_IMPORTED_MODULE_3___default.a('#bnm-namesGridCopyText', {
                        text: function (trigger) {
                            return cellText;
                        }
                    });
                };
            }
        });

		$("#bnm-ipGridContextMenu").kendoContextMenu({
            target: '#bnm-ipGrid',
            filter: 'td',
            select: function (e) {
                var cell = e.target;
                var row = $(cell).parent()[0];
                var grid = $('#bnm-ipGrid').data('kendoGrid');
                var itemId = e.item.id;

                var cellText = cell.innerText;

                if (itemId === 'bnm-ipGridCopyText') {
                    new clipboard__WEBPACK_IMPORTED_MODULE_3___default.a('#bnm-ipGridCopyText', {
                        text: function (trigger) {
                            return cellText;
                        }
                    });
                };
            }
        });

		// Initialize refresh and remove buttons
		$('#bnm-refreshNamesBt').on('click', $.proxy(this._onRefreshNamesClick, this));
		$('#bnm-removeNameBt').on('click', $.proxy(this._onRemoveNamesClick, this));
		$('#bnm-removeAllNamesBt').on('click', $.proxy(this._onRemoveAllNamesClick, this));
		$('#bnm-refreshIpBt').on('click', $.proxy(this._onRefreshIpClick, this));
		$('#bnm-removeIpBt').on('click', $.proxy(this._onRemoveIpClick, this));
		$('#bnm-removeAllIpBt').on('click', $.proxy(this._onRemoveAllIpClick, this));

		// Configure ban panel
		$('#bnm-banModal').modal({
			backdrop: 'static',
			keyboard: false,
			show: false,
		});

		// Add listener for ban panel hide
		$('#bnm-banModal').on('hidden.bs.modal', $.proxy(this._onBanModalHidden, this));

		// Initialize kendo validation on folder name form
		this._banValidator = $('#bnm-banForm').kendoValidator({}).data('kendoValidator');

		// Add listener to Ban button click
		$('#bnm-banBt').on('click', $.proxy(this._onBanClick, this));

		// Init ban delay numeric stepper
		this._banDelayIn = $('#bnm-modalDelayNS').kendoNumericTextBox({
		    min: 0,
		    step: 1,
		    format: '#'
		}).data('kendoNumericTextBox');

		// Init ban expiration date picker
		this._banExpDateIn = $('#bnm-expirationDP').kendoDatePicker({
			value: this._tomorrow,
			min: this._tomorrow,
			footer: false,
			format: 'dd/MM/yyyy'
		}).data('kendoDatePicker');

		// Disable manual date input
		$('#bnm-expirationDP').attr('readonly','readonly');

		// Init ban expiration hours/minutes inputs
		this._banExpHourIn = $('#bnm-modalExpHoursNS').kendoNumericTextBox({
		    min: 0,
			max: 99,
		    step: 1,
		    format: '#'
		}).data('kendoNumericTextBox');

		this._banExpMinIn = $('#bnm-modalExpMinsNS').kendoNumericTextBox({
		    min: 0,
			max: 59,
		    step: 1,
		    format: '#'
		}).data('kendoNumericTextBox');

		//-------------------------------------

		// Load zones list
		this.sendExtensionRequest(this.REQ_GET_ZONES);

		// Load banned IP addresses
		// Note: we don't load the banned usernames automatically because a zone must be selected
		this._getBannedIPs();
	}

	destroy()
	{
		// Call super method
		super.destroy();

		// Destroy scrolling tabs
		$('#bnm-tabNavigator #tabs').scrollingTabs('destroy');

		// Remove click listeners
		$('#bnm-showBanModalBt').off('click');
		$('#bnm-refreshNamesBt').off('click');
		$('#bnm-removeNameBt').off('click');
		$('#bnm-removeAllNamesBt').off('click');
		$('#bnm-refreshIpBt').off('click');
		$('#bnm-removeIpBt').off('click');
		$('#bnm-removeAllIpBt').off('click');
		$('#bnm-banBt').off('click');

		// Hide ban panel
		$('#bnm-banModal').modal('hide');

		// Remove room creation panel listener
		$('#bnm-banModal').off('hidden.bs.modal');
	}

	onExtensionCommand(command, data)
	{
		// Data received
		if (command == this.RESP_ZONES)
		{
			let zones = data.getUtfStringArray('zones');

			// If we have 1 zone only, we will select it immediately
			const selectFirstZone = zones.length == 1;

			// Sort zones list
			zones.sort(function (a, b) {
				return a.localeCompare(b);
			});

			// Add "none" zone
			zones.unshift('[none]');

			// Set zone dropdown datasource
			this._zonesDD.setDataSource(zones);

			if (selectFirstZone)
			{
				this._zonesDD.select(1);
				this._getBannedUsernames();
			}
			else
				this._zonesDD.select(0);
		}

		else if (command == this.RESP_USERNAMES)
		{
			// Substitute grid's data source, retaining current sorting
			let currSort = this._namesGrid.dataSource.sort();

			let ds = new kendo.data.DataSource({
				schema: {
					model: {
						fields: {
							expirationDate: {
								type: 'dateTime',
								parse: function (e) {
									return moment__WEBPACK_IMPORTED_MODULE_2__(e, 'DD/MM/YYYY HH:mm').toDate();
								}
							},
							banDate: {
								type: 'dateTime',
								parse: function (e) {
									return moment__WEBPACK_IMPORTED_MODULE_2__(e, 'DD/MM/YYYY HH:mm').toDate();
								}
							}
						}
					}
				},
				sort: currSort, // FIXME Expected sorting doesn't seem to be applied
				data: this._generateBannedEntries(data.getSFSArray('uNames'))
			});

			// Assign data source to grid
			this._namesGrid.setDataSource(ds);

			// Enable remove all button
			$('#bnm-removeAllNamesBt').attr('disabled', ds.total() == 0)
		}
		else if (command == this.RESP_IPADDRESSES)
		{
			// Substitute grid's data source, retaining current sorting (FIX)
			let currSort = this._ipGrid.dataSource.sort();

			let ds = new kendo.data.DataSource({
				schema: {
					model: {
						fields: {
							expirationDate: {
								type: 'dateTime',
								parse: function (e) {
									return moment__WEBPACK_IMPORTED_MODULE_2__(e, 'DD/MM/YYYY HH:mm').toDate();
								}
							},
							banDate: {
								type: 'dateTime',
								parse: function (e) {
									return moment__WEBPACK_IMPORTED_MODULE_2__(e, 'DD/MM/YYYY HH:mm').toDate();
								}
							}
						}
					}
				},
				sort: currSort, // FIXME Expected sorting doesn't seem to be applied
				data: this._generateBannedEntries(data.getSFSArray('IPs'))
			});

			// Assign data source to grid
			this._ipGrid.setDataSource(ds);

			// Enable remove all button
			$('#bnm-removeAllIpBt').attr('disabled', ds.total() == 0)
		}
	}

	//---------------------------------
	// UI EVENT LISTENERS
	//---------------------------------

	_onShowBanModalClick()
	{
		// Display zone name
		$('#bnm-modalZoneLb').text(this._zonesDD.value())

		// Display ban panel
		$('#bnm-banModal').modal('show');

		// Focus name field
		$('#bnm-modalNameIn').focus();
	}

	_onBanModalHidden(e)
	{
		// Reset validator
		this._banValidator.hideMessages();

		// The method above doesn't remove the k-invalid classes and aria-invalid="true" attributes from inputs
		// Let's do it manually
		$('#bnm-banForm .k-invalid').removeClass('k-invalid');
		$('#bnm-banForm [aria-invalid="true"]').removeAttr('aria-invalid');

		// Reset ban form
		$('#bnm-modalNameIn').val('');
		$('#bnm-modalReasonIn').val('');
		$('#bnm-modalMessageIn').val('');

		this._banDelayIn.value(5);

		$('input[name="expiration"]').removeAttr('checked');
		$('#bnm-expirationRB0').prop('checked', true);

		this._banExpHourIn.value(1);
		this._banExpMinIn.value(0);

		this._banExpDateIn.min(this._tomorrow);
		this._banExpDateIn.value(this._tomorrow);
	}

	_onBanClick()
	{
		if (this._banValidator.validate())
		{
			// Retrieve ban details
			let params = new SFS2X.SFSObject();

			params.putUtfString('zone', this._zonesDD.value());
			params.putUtfString('name', $('#bnm-modalNameIn').val());
			params.putUtfString('msg', $('#bnm-modalMessageIn').val());
			params.putInt('delay', this._banDelayIn.value() != null ? this._banDelayIn.value() : 0);
			params.putUtfString('reason', $('#bnm-modalReasonIn').val());

			const exp = $('input[name="expiration"]:checked').val();
			let duration = -1;

			if (exp == 'after')
			{
				const hours = this._banExpHourIn.value() != null ? this._banExpHourIn.value() : 0;
				const minutes = this._banExpMinIn.value() != null ? this._banExpMinIn.value() : 0;

				duration = (hours * 60) + minutes;

				if (duration <= 0)
					duration = 1;
			}
			else if (exp == 'on')
			{
				const onDate = moment__WEBPACK_IMPORTED_MODULE_2__(this._banExpDateIn.value());
				const now = moment__WEBPACK_IMPORTED_MODULE_2__();

				duration = onDate.startOf('day').diff(now.startOf('minute'), 'minutes');

				if (duration <= 0)
					duration = 1;
			}

			params.putInt('durMins', duration);

			// Send ban request to server
			this.sendExtensionRequest(this.REQ_BAN, params);

			// Refresh list
			this._getBannedUsernames();

			// Focus username field
			$('#bnm-modalNameIn').focus();
			$('#bnm-modalNameIn').select();
		}
	}

	_onZoneChange()
	{
		$('#bnm-namesButtons').attr('disabled', this._zonesDD.select() == 0);
		$('#bnm-showBanModalBt').attr('disabled', this._zonesDD.select() == 0);

		this._getBannedUsernames();
	}

	_onNamesGridSelectionChange()
	{
		// Enable/disable remove button
		const selectedRows = this._namesGrid.select();
		$('#bnm-removeNameBt').attr('disabled', selectedRows.length == 0);
	}

	_onIpGridSelectionChange()
	{
		// Enable/disable remove button
		const selectedRows = this._ipGrid.select();
		$('#bnm-removeIpBt').attr('disabled', selectedRows.length == 0);
	}

	_onRefreshNamesClick()
	{
		this._getBannedUsernames();
	}

	_onRemoveNamesClick()
	{
		this.shellCtrl.showConfirmWarning(`Are you sure you want to remove the banning for the selected username${this._ipGrid.select().length > 1 ? 's' : ''}?`, $.proxy(this._onRemoveNamesConfirm, this));
	}

	_onRemoveNamesConfirm()
	{
		let selectedRows = this._namesGrid.select();
		let usernames = [];

		for (let i = 0; i < selectedRows.length; i++)
		{
			let dataItem = this._namesGrid.dataItem(selectedRows[i]);
			usernames.push(dataItem.name);
		}

		this._requestBannedUsersRemoval(usernames, this._zonesDD.value());
	}

	_onRemoveAllNamesClick()
	{
		this.shellCtrl.showConfirmWarning(`Are you sure you want to remove all banned usernames?`, $.proxy(this._onRemovAllNamesConfirm, this));
	}

	_onRemovAllNamesConfirm()
	{
		this._requestBannedUsersRemoval(null, this._zonesDD.value());
	}

	_onRefreshIpClick()
	{
		this._getBannedIPs();
	}

	_onRemoveIpClick()
	{
		this.shellCtrl.showConfirmWarning(`Are you sure you want to remove the banning for the selected IP address${this._ipGrid.select().length > 1 ? 'es' : ''}?`, $.proxy(this._onRemoveIpConfirm, this));
	}

	_onRemoveIpConfirm()
	{
		let selectedRows = this._ipGrid.select();
		let ipAddresses = [];

		for (let i = 0; i < selectedRows.length; i++)
		{
			let dataItem = this._ipGrid.dataItem(selectedRows[i]);
			ipAddresses.push(dataItem.ipAddress);
		}

		this._requestBannedIPsRemoval(ipAddresses);
	}

	_onRemoveAllIpClick()
	{
		this.shellCtrl.showConfirmWarning(`Are you sure you want to remove all banned IP addresses?`, $.proxy(this._onRemovAllIpConfirm, this));
	}

	_onRemovAllIpConfirm()
	{
		this._requestBannedIPsRemoval(null);
	}

	//------------------------------------
	// PRIVATE METHODS
	//------------------------------------

	_getBannedIPs()
	{
		// Remove selection
		this._ipGrid.clearSelection();

		// Clear banned IPs table
		this._ipGrid.setDataSource([]);

		// Send request to extension
		this.sendExtensionRequest(this.REQ_GET_IPADDRESSES);
	}

	_getBannedUsernames()
	{
		// Remove selection
		this._namesGrid.clearSelection();

		// Clear banned IPs table
		this._namesGrid.setDataSource([]);

		if (this._zonesDD.select() > 0)
		{
			// Get zone ID
			let params = new SFS2X.SFSObject();
			params.putUtfString('zone', this._zonesDD.value());

			// Send request to extension
			this.sendExtensionRequest(this.REQ_GET_USERNAMES, params);
		}
	}

	_generateBannedEntries(banData)
	{
		let bannedEntries = [];

		for (let i = 0; i < banData.size(); i++)
		{
			const bu = _data_banned_user__WEBPACK_IMPORTED_MODULE_1__["BannedUser"].fromSFSArray(banData.getSFSArray(i));
			bannedEntries.push(bu);
		}

		return bannedEntries;
	}

	_requestBannedUsersRemoval(usernames, zone)
	{
		// If the usernames array is null, server will remove all banned usernames
		let params = new SFS2X.SFSObject();
		params.putUtfString('zone', zone);

		if (usernames == null)
			params.putNull('uNames');
		else
			params.putUtfStringArray('uNames', usernames);

		this.sendExtensionRequest(this.REQ_REMOVE_USERNAMES, params);
	}

	_requestBannedIPsRemoval(ipAddresses)
	{
		// If the usernames array is null, server will remove all banned usernames
		let params = new SFS2X.SFSObject();

		if (ipAddresses == null)
			params.putNull('IPs');
		else
			params.putUtfStringArray('IPs', ipAddresses);

		this.sendExtensionRequest(this.REQ_REMOVE_IPADDRESSES, params);
	}

	//---------------------------------
	// PRIVATE GETTERS
	//---------------------------------

	get _tomorrow()
	{
		let tomorrow = moment__WEBPACK_IMPORTED_MODULE_2__().add(1, 'd');
		return tomorrow.toDate();
	}
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzZXRzL2pzL2NvcmUvbW9kdWxlcy9tb2R1bGUtMS5idW5kbGUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcHBsaWNhdGlvbi8uL3NyYy9kYXRhL2Jhbm5lZC11c2VyLmpzIiwid2VicGFjazovL2FwcGxpY2F0aW9uLy4vc3JjL21vZHVsZXMvYmFuLW1hbmFnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgbW9tZW50IGZyb20gJ21vbWVudCc7XG5cbmV4cG9ydCBjbGFzcyBCYW5uZWRVc2VyXG57XG5cdGNvbnN0cnVjdG9yKG5hbWUsIHpvbmUpXG5cdHtcblx0XHR0aGlzLkRBVEVfRk9STUFUID0gJ0REL01NL1lZWVkgSEg6bW0nO1xuXG5cdCAgICB0aGlzLm5hbWUgPSBuYW1lO1xuXHRcdHRoaXMuem9uZSA9IHpvbmU7XG5cdH1cblxuXHRzdGF0aWMgZnJvbVNGU0FycmF5KHNmc2EpXG5cdHtcblx0XHRsZXQgYnUgPSBuZXcgQmFubmVkVXNlcihzZnNhLmdldFV0ZlN0cmluZygwKSwgc2ZzYS5nZXRVdGZTdHJpbmcoMSkpO1xuXG5cdFx0YnUubW9kZSA9IHNmc2EuZ2V0VXRmU3RyaW5nKDIpO1xuXHRcdGJ1LnJlYXNvbiA9IHNmc2EuZ2V0VXRmU3RyaW5nKDMpO1xuXHRcdGJ1LmFkbWluTmFtZSA9IHNmc2EuZ2V0VXRmU3RyaW5nKDQpO1xuXHRcdGJ1LmlwQWRkcmVzcyA9IHNmc2EuZ2V0VXRmU3RyaW5nKDUpO1xuXHRcdGJ1LmJhblRpbWVNaWxsaXMgPSBzZnNhLmdldExvbmcoNik7XG5cdFx0YnUuYmFuRHVyYXRpb25NaWxsaXMgPSBzZnNhLmdldExvbmcoNyk7XG5cdFx0YnUuZXhwaXJhdGlvbkRhdGUgPSBidS5fZ2V0RXhwaXJhdGlvbkRhdGUoKTtcblx0XHRidS5iYW5EYXRlID0gYnUuX2dldEJhbkRhdGUoKTtcblxuXHRcdHJldHVybiBidTtcblx0fVxuXG5cdF9nZXRFeHBpcmF0aW9uRGF0ZSgpXG5cdHtcblx0XHRjb25zdCBleHBpcmVPbiA9IG1vbWVudCh0aGlzLmJhblRpbWVNaWxsaXMgKyB0aGlzLmJhbkR1cmF0aW9uTWlsbGlzKTtcblxuXHRcdGlmIChleHBpcmVPbi55ZWFyKCkgPj0gbW9tZW50KCkueWVhcigpICsgMTAwKVxuXHRcdFx0cmV0dXJuICdOZXZlcic7XG5cdFx0ZWxzZVxuXHRcdFx0cmV0dXJuIGV4cGlyZU9uLmZvcm1hdCh0aGlzLkRBVEVfRk9STUFUKTtcblx0fVxuXG5cdF9nZXRCYW5EYXRlKClcblx0e1xuXHRcdHJldHVybiBtb21lbnQodGhpcy5iYW5UaW1lTWlsbGlzKS5mb3JtYXQodGhpcy5EQVRFX0ZPUk1BVCk7XG5cdH1cbn1cbiIsImltcG9ydCB7QmFzZU1vZHVsZX0gZnJvbSAnLi9iYXNlLW1vZHVsZSc7XG5pbXBvcnQge0Jhbm5lZFVzZXJ9IGZyb20gJy4uL2RhdGEvYmFubmVkLXVzZXInO1xuaW1wb3J0ICogYXMgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgQ2xpcGJvYXJkIGZyb20gJ2NsaXBib2FyZCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhbk1hbmFnZXIgZXh0ZW5kcyBCYXNlTW9kdWxlXG57XG5cdGNvbnN0cnVjdG9yKClcblx0e1xuXHQgICAgc3VwZXIoJ2Jhbk1hbmFnZXInKTtcblxuXHRcdC8vIE91dGdvaW5nIHJlcXVlc3RzXG5cdFx0dGhpcy5SRVFfR0VUX1pPTkVTID0gJ2dldFpvbmVzJztcblx0XHR0aGlzLlJFUV9HRVRfVVNFUk5BTUVTID0gJ2dldFVOYW1lcyc7XG5cdFx0dGhpcy5SRVFfR0VUX0lQQUREUkVTU0VTID0gJ2dldElQcyc7XG5cdFx0dGhpcy5SRVFfUkVNT1ZFX1VTRVJOQU1FUyA9ICdyZW1vdmVVTmFtZXMnO1xuXHRcdHRoaXMuUkVRX1JFTU9WRV9JUEFERFJFU1NFUyA9ICdyZW1vdmVJUHMnO1xuXHRcdHRoaXMuUkVRX0JBTiA9ICdiYW4nO1xuXG5cdFx0Ly8gSW5jb21pbmcgcmVzcG9uc2VzXG5cdFx0dGhpcy5SRVNQX1pPTkVTID0gJ3pvbmVzJztcblx0XHR0aGlzLlJFU1BfVVNFUk5BTUVTID0gJ3VOYW1lcyc7XG5cdFx0dGhpcy5SRVNQX0lQQUREUkVTU0VTID0gJ0lQcyc7XG5cdH1cblxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBDT01NT04gTU9EVUxFIElOVEVSRkFDRSBNRVRIT0RTXG5cdC8vIFRoaXMgbWVtYmVycyBhcmUgdXNlZCBieSB0aGUgbWFpbiBjb250cm9sbGVyXG5cdC8vIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIG1vZHVsZSdzIGNvbnRyb2xsZXIuXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0aW5pdGlhbGl6ZShpZERhdGEsIHNoZWxsQ29udHJvbGxlcilcblx0e1xuXHRcdC8vIENhbGwgc3VwZXIgbWV0aG9kXG5cdFx0c3VwZXIuaW5pdGlhbGl6ZShpZERhdGEsIHNoZWxsQ29udHJvbGxlcik7XG5cblx0XHQvLyBJbml0aWFsaXplIHNjcm9sbGluZyB0YWJzXG5cdFx0JCgnI2JubS10YWJOYXZpZ2F0b3IgPiAjdGFicycpLnNjcm9sbGluZ1RhYnMoe1xuXHRcdFx0Ym9vdHN0cmFwVmVyc2lvbjogNCxcblx0XHRcdHNjcm9sbFRvVGFiRWRnZTogdHJ1ZSxcblx0XHRcdGVuYWJsZVN3aXBpbmc6IHRydWUsXG5cdFx0XHRkaXNhYmxlU2Nyb2xsQXJyb3dzT25GdWxseVNjcm9sbGVkOiB0cnVlLFxuXHRcdFx0Y3NzQ2xhc3NMZWZ0QXJyb3c6ICdmYSBmYS1jaGV2cm9uLWxlZnQnLFxuXHRcdFx0Y3NzQ2xhc3NSaWdodEFycm93OiAnZmEgZmEtY2hldnJvbi1yaWdodCdcblx0XHR9KTtcblxuXHRcdC8vIEluaXRpYWxpemUgem9uZSBmaWx0ZXIgZHJvcGRvd25cblx0XHR0aGlzLl96b25lc0REID0gJCgnI2JubS16b25lc0REJykua2VuZG9Ecm9wRG93bkxpc3Qoe1xuXHRcdFx0Y2hhbmdlOiAkLnByb3h5KHRoaXMuX29uWm9uZUNoYW5nZSwgdGhpcylcblx0XHR9KS5kYXRhKCdrZW5kb0Ryb3BEb3duTGlzdCcpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBiYW4gYnV0dG9uXG5cdFx0JCgnI2JubS1zaG93QmFuTW9kYWxCdCcpLm9uKCdjbGljaycsICQucHJveHkodGhpcy5fb25TaG93QmFuTW9kYWxDbGljaywgdGhpcykpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBiYW5uZWQgSVBzIGdyaWRcblx0XHR0aGlzLl9pcEdyaWQgPSAkKCcjYm5tLWlwR3JpZCcpLmtlbmRvR3JpZCh7XG5cdFx0XHRzY3JvbGxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgc29ydGFibGU6IHRydWUsXG5cdFx0XHQvL3Jlc2l6YWJsZTogdHJ1ZSxcblx0XHRcdHNlbGVjdGFibGU6ICdtdWx0aXBsZScsXG5cdFx0XHRhbGxvd0NvcHk6IHRydWUsXG4gICAgICAgICAgICBjb2x1bW5zOlxuICAgICAgICAgICAgW1xuXHRcdFx0XHR7XG5cdCAgICAgICAgICAgICAgICBmaWVsZDogJ2lwQWRkcmVzcycsXG5cdCAgICAgICAgICAgICAgICB3aWR0aDogMTUwLFxuXHRcdFx0XHRcdHRpdGxlOiAnSVAgQWRkcmVzcycsXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICAgIGZpZWxkOiAnYmFuRGF0ZScsXG5cdCAgICAgICAgICAgICAgICB3aWR0aDogMTIwLFxuXHQgICAgICAgICAgICAgICAgdGl0bGU6ICdEYXRlJyxcblx0XHRcdFx0XHRmb3JtYXQ6ICd7MDpkZC9NTS95eXl5IEhIOm1tfScsXG5cdFx0XHRcdFx0dHlwZTogJ2RhdGVUaW1lJ1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgICBmaWVsZDogJ2V4cGlyYXRpb25EYXRlJyxcblx0ICAgICAgICAgICAgICAgIHdpZHRoOiAxMjAsXG5cdCAgICAgICAgICAgICAgICB0aXRsZTogJ0V4cGlyYXRpb24nLFxuXHRcdFx0XHRcdGZvcm1hdDogJ3swOmRkL01NL3l5eXkgSEg6bW19Jyxcblx0XHRcdFx0XHR0eXBlOiAnZGF0ZVRpbWUnXG5cdCAgICAgICAgICAgIH0sXG5cdFx0XHRcdHtcblx0ICAgICAgICAgICAgICAgIGZpZWxkOiAncmVhc29uJyxcblx0ICAgICAgICAgICAgICAgIHdpZHRoOiAyNTAsXG5cdFx0XHRcdFx0dGl0bGU6ICdSZWFzb24nLFxuXHQgICAgICAgICAgICB9LFxuXHRcdFx0XHR7XG5cdCAgICAgICAgICAgICAgICBmaWVsZDogJ2FkbWluTmFtZScsXG5cdCAgICAgICAgICAgICAgICB3aWR0aDogMTUwLFxuXHRcdFx0XHRcdHRpdGxlOiAnQmFubmVkIEJ5Jyxcblx0ICAgICAgICAgICAgfSxcblx0XHRcdF0sXG5cdFx0XHRub1JlY29yZHM6IHtcblx0XHRcdFx0dGVtcGxhdGU6ICdObyBiYW5uZWQgSVAgYWRkcmVzc2VzLidcblx0XHRcdH0sXG5cdFx0XHRjaGFuZ2U6ICQucHJveHkodGhpcy5fb25JcEdyaWRTZWxlY3Rpb25DaGFuZ2UsIHRoaXMpLFxuXHRcdFx0ZGF0YVNvdXJjZTogW11cbiAgICAgICAgfSkuZGF0YSgna2VuZG9HcmlkJyk7XG5cblx0XHQvLyBJbml0aWFsaXplIGJhbm5lZCB1c2VybmFtZXMgZ3JpZFxuXHRcdHRoaXMuX25hbWVzR3JpZCA9ICQoJyNibm0tbmFtZXNHcmlkJykua2VuZG9HcmlkKHtcblx0XHRcdHNjcm9sbGFibGU6IHRydWUsXG4gICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSxcblx0XHRcdC8vcmVzaXphYmxlOiB0cnVlLFxuXHRcdFx0c2VsZWN0YWJsZTogJ211bHRpcGxlJyxcblx0XHRcdGFsbG93Q29weTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbHVtbnM6XG4gICAgICAgICAgICBbXG5cdFx0XHRcdHtcblx0ICAgICAgICAgICAgICAgIGZpZWxkOiAnbmFtZScsXG5cdCAgICAgICAgICAgICAgICB3aWR0aDogMTUwLFxuXHRcdFx0XHRcdHRpdGxlOiAnVXNlcm5hbWUnLFxuXHQgICAgICAgICAgICB9LFxuXHRcdFx0XHR7XG5cdCAgICAgICAgICAgICAgICBmaWVsZDogJ2JhbkRhdGUnLFxuXHQgICAgICAgICAgICAgICAgd2lkdGg6IDEyMCxcblx0ICAgICAgICAgICAgICAgIHRpdGxlOiAnRGF0ZScsXG5cdFx0XHRcdFx0Zm9ybWF0OiAnezA6ZGQvTU0veXl5eSBISDptbX0nLFxuXHRcdFx0XHRcdHR5cGU6ICdkYXRlVGltZSdcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgICAgZmllbGQ6ICdleHBpcmF0aW9uRGF0ZScsXG5cdCAgICAgICAgICAgICAgICB3aWR0aDogMTIwLFxuXHQgICAgICAgICAgICAgICAgdGl0bGU6ICdFeHBpcmF0aW9uJyxcblx0XHRcdFx0XHRmb3JtYXQ6ICd7MDpkZC9NTS95eXl5IEhIOm1tfScsXG5cdFx0XHRcdFx0dHlwZTogJ2RhdGVUaW1lJ1xuXHQgICAgICAgICAgICB9LFxuXHRcdFx0XHR7XG5cdCAgICAgICAgICAgICAgICBmaWVsZDogJ3JlYXNvbicsXG5cdCAgICAgICAgICAgICAgICB3aWR0aDogMjUwLFxuXHRcdFx0XHRcdHRpdGxlOiAnUmVhc29uJyxcblx0ICAgICAgICAgICAgfSxcblx0XHRcdFx0e1xuXHQgICAgICAgICAgICAgICAgZmllbGQ6ICdhZG1pbk5hbWUnLFxuXHQgICAgICAgICAgICAgICAgd2lkdGg6IDE1MCxcblx0XHRcdFx0XHR0aXRsZTogJ0Jhbm5lZCBCeScsXG5cdCAgICAgICAgICAgIH0sXG5cdFx0XHRdLFxuXHRcdFx0bm9SZWNvcmRzOiB7XG5cdFx0XHRcdHRlbXBsYXRlOiAnTm8gYmFubmVkIHVzZXJuYW1lcy4nXG5cdFx0XHR9LFxuXHRcdFx0Y2hhbmdlOiAkLnByb3h5KHRoaXMuX29uTmFtZXNHcmlkU2VsZWN0aW9uQ2hhbmdlLCB0aGlzKSxcblx0XHRcdGRhdGFTb3VyY2U6IFtdXG4gICAgICAgIH0pLmRhdGEoJ2tlbmRvR3JpZCcpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBjb250ZXh0IG1lbnVzXG5cdFx0JChcIiNibm0tbmFtZXNHcmlkQ29udGV4dE1lbnVcIikua2VuZG9Db250ZXh0TWVudSh7XG4gICAgICAgICAgICB0YXJnZXQ6ICcjYm5tLW5hbWVzR3JpZCcsXG4gICAgICAgICAgICBmaWx0ZXI6ICd0ZCcsXG4gICAgICAgICAgICBzZWxlY3Q6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gJChjZWxsKS5wYXJlbnQoKVswXTtcbiAgICAgICAgICAgICAgICB2YXIgZ3JpZCA9ICQoJyNibm0tbmFtZXNHcmlkJykuZGF0YSgna2VuZG9HcmlkJyk7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1JZCA9IGUuaXRlbS5pZDtcblxuICAgICAgICAgICAgICAgIHZhciBjZWxsVGV4dCA9IGNlbGwuaW5uZXJUZXh0O1xuXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1JZCA9PT0gJ2JubS1uYW1lc0dyaWRDb3B5VGV4dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IENsaXBib2FyZCgnI2JubS1uYW1lc0dyaWRDb3B5VGV4dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICh0cmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbGxUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXHRcdCQoXCIjYm5tLWlwR3JpZENvbnRleHRNZW51XCIpLmtlbmRvQ29udGV4dE1lbnUoe1xuICAgICAgICAgICAgdGFyZ2V0OiAnI2JubS1pcEdyaWQnLFxuICAgICAgICAgICAgZmlsdGVyOiAndGQnLFxuICAgICAgICAgICAgc2VsZWN0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9ICQoY2VsbCkucGFyZW50KClbMF07XG4gICAgICAgICAgICAgICAgdmFyIGdyaWQgPSAkKCcjYm5tLWlwR3JpZCcpLmRhdGEoJ2tlbmRvR3JpZCcpO1xuICAgICAgICAgICAgICAgIHZhciBpdGVtSWQgPSBlLml0ZW0uaWQ7XG5cbiAgICAgICAgICAgICAgICB2YXIgY2VsbFRleHQgPSBjZWxsLmlubmVyVGV4dDtcblxuICAgICAgICAgICAgICAgIGlmIChpdGVtSWQgPT09ICdibm0taXBHcmlkQ29weVRleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBDbGlwYm9hcmQoJyNibm0taXBHcmlkQ29weVRleHQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbiAodHJpZ2dlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZWxsVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cblx0XHQvLyBJbml0aWFsaXplIHJlZnJlc2ggYW5kIHJlbW92ZSBidXR0b25zXG5cdFx0JCgnI2JubS1yZWZyZXNoTmFtZXNCdCcpLm9uKCdjbGljaycsICQucHJveHkodGhpcy5fb25SZWZyZXNoTmFtZXNDbGljaywgdGhpcykpO1xuXHRcdCQoJyNibm0tcmVtb3ZlTmFtZUJ0Jykub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLl9vblJlbW92ZU5hbWVzQ2xpY2ssIHRoaXMpKTtcblx0XHQkKCcjYm5tLXJlbW92ZUFsbE5hbWVzQnQnKS5vbignY2xpY2snLCAkLnByb3h5KHRoaXMuX29uUmVtb3ZlQWxsTmFtZXNDbGljaywgdGhpcykpO1xuXHRcdCQoJyNibm0tcmVmcmVzaElwQnQnKS5vbignY2xpY2snLCAkLnByb3h5KHRoaXMuX29uUmVmcmVzaElwQ2xpY2ssIHRoaXMpKTtcblx0XHQkKCcjYm5tLXJlbW92ZUlwQnQnKS5vbignY2xpY2snLCAkLnByb3h5KHRoaXMuX29uUmVtb3ZlSXBDbGljaywgdGhpcykpO1xuXHRcdCQoJyNibm0tcmVtb3ZlQWxsSXBCdCcpLm9uKCdjbGljaycsICQucHJveHkodGhpcy5fb25SZW1vdmVBbGxJcENsaWNrLCB0aGlzKSk7XG5cblx0XHQvLyBDb25maWd1cmUgYmFuIHBhbmVsXG5cdFx0JCgnI2JubS1iYW5Nb2RhbCcpLm1vZGFsKHtcblx0XHRcdGJhY2tkcm9wOiAnc3RhdGljJyxcblx0XHRcdGtleWJvYXJkOiBmYWxzZSxcblx0XHRcdHNob3c6IGZhbHNlLFxuXHRcdH0pO1xuXG5cdFx0Ly8gQWRkIGxpc3RlbmVyIGZvciBiYW4gcGFuZWwgaGlkZVxuXHRcdCQoJyNibm0tYmFuTW9kYWwnKS5vbignaGlkZGVuLmJzLm1vZGFsJywgJC5wcm94eSh0aGlzLl9vbkJhbk1vZGFsSGlkZGVuLCB0aGlzKSk7XG5cblx0XHQvLyBJbml0aWFsaXplIGtlbmRvIHZhbGlkYXRpb24gb24gZm9sZGVyIG5hbWUgZm9ybVxuXHRcdHRoaXMuX2JhblZhbGlkYXRvciA9ICQoJyNibm0tYmFuRm9ybScpLmtlbmRvVmFsaWRhdG9yKHt9KS5kYXRhKCdrZW5kb1ZhbGlkYXRvcicpO1xuXG5cdFx0Ly8gQWRkIGxpc3RlbmVyIHRvIEJhbiBidXR0b24gY2xpY2tcblx0XHQkKCcjYm5tLWJhbkJ0Jykub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLl9vbkJhbkNsaWNrLCB0aGlzKSk7XG5cblx0XHQvLyBJbml0IGJhbiBkZWxheSBudW1lcmljIHN0ZXBwZXJcblx0XHR0aGlzLl9iYW5EZWxheUluID0gJCgnI2JubS1tb2RhbERlbGF5TlMnKS5rZW5kb051bWVyaWNUZXh0Qm94KHtcblx0XHQgICAgbWluOiAwLFxuXHRcdCAgICBzdGVwOiAxLFxuXHRcdCAgICBmb3JtYXQ6ICcjJ1xuXHRcdH0pLmRhdGEoJ2tlbmRvTnVtZXJpY1RleHRCb3gnKTtcblxuXHRcdC8vIEluaXQgYmFuIGV4cGlyYXRpb24gZGF0ZSBwaWNrZXJcblx0XHR0aGlzLl9iYW5FeHBEYXRlSW4gPSAkKCcjYm5tLWV4cGlyYXRpb25EUCcpLmtlbmRvRGF0ZVBpY2tlcih7XG5cdFx0XHR2YWx1ZTogdGhpcy5fdG9tb3Jyb3csXG5cdFx0XHRtaW46IHRoaXMuX3RvbW9ycm93LFxuXHRcdFx0Zm9vdGVyOiBmYWxzZSxcblx0XHRcdGZvcm1hdDogJ2RkL01NL3l5eXknXG5cdFx0fSkuZGF0YSgna2VuZG9EYXRlUGlja2VyJyk7XG5cblx0XHQvLyBEaXNhYmxlIG1hbnVhbCBkYXRlIGlucHV0XG5cdFx0JCgnI2JubS1leHBpcmF0aW9uRFAnKS5hdHRyKCdyZWFkb25seScsJ3JlYWRvbmx5Jyk7XG5cblx0XHQvLyBJbml0IGJhbiBleHBpcmF0aW9uIGhvdXJzL21pbnV0ZXMgaW5wdXRzXG5cdFx0dGhpcy5fYmFuRXhwSG91ckluID0gJCgnI2JubS1tb2RhbEV4cEhvdXJzTlMnKS5rZW5kb051bWVyaWNUZXh0Qm94KHtcblx0XHQgICAgbWluOiAwLFxuXHRcdFx0bWF4OiA5OSxcblx0XHQgICAgc3RlcDogMSxcblx0XHQgICAgZm9ybWF0OiAnIydcblx0XHR9KS5kYXRhKCdrZW5kb051bWVyaWNUZXh0Qm94Jyk7XG5cblx0XHR0aGlzLl9iYW5FeHBNaW5JbiA9ICQoJyNibm0tbW9kYWxFeHBNaW5zTlMnKS5rZW5kb051bWVyaWNUZXh0Qm94KHtcblx0XHQgICAgbWluOiAwLFxuXHRcdFx0bWF4OiA1OSxcblx0XHQgICAgc3RlcDogMSxcblx0XHQgICAgZm9ybWF0OiAnIydcblx0XHR9KS5kYXRhKCdrZW5kb051bWVyaWNUZXh0Qm94Jyk7XG5cblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRcdC8vIExvYWQgem9uZXMgbGlzdFxuXHRcdHRoaXMuc2VuZEV4dGVuc2lvblJlcXVlc3QodGhpcy5SRVFfR0VUX1pPTkVTKTtcblxuXHRcdC8vIExvYWQgYmFubmVkIElQIGFkZHJlc3Nlc1xuXHRcdC8vIE5vdGU6IHdlIGRvbid0IGxvYWQgdGhlIGJhbm5lZCB1c2VybmFtZXMgYXV0b21hdGljYWxseSBiZWNhdXNlIGEgem9uZSBtdXN0IGJlIHNlbGVjdGVkXG5cdFx0dGhpcy5fZ2V0QmFubmVkSVBzKCk7XG5cdH1cblxuXHRkZXN0cm95KClcblx0e1xuXHRcdC8vIENhbGwgc3VwZXIgbWV0aG9kXG5cdFx0c3VwZXIuZGVzdHJveSgpO1xuXG5cdFx0Ly8gRGVzdHJveSBzY3JvbGxpbmcgdGFic1xuXHRcdCQoJyNibm0tdGFiTmF2aWdhdG9yICN0YWJzJykuc2Nyb2xsaW5nVGFicygnZGVzdHJveScpO1xuXG5cdFx0Ly8gUmVtb3ZlIGNsaWNrIGxpc3RlbmVyc1xuXHRcdCQoJyNibm0tc2hvd0Jhbk1vZGFsQnQnKS5vZmYoJ2NsaWNrJyk7XG5cdFx0JCgnI2JubS1yZWZyZXNoTmFtZXNCdCcpLm9mZignY2xpY2snKTtcblx0XHQkKCcjYm5tLXJlbW92ZU5hbWVCdCcpLm9mZignY2xpY2snKTtcblx0XHQkKCcjYm5tLXJlbW92ZUFsbE5hbWVzQnQnKS5vZmYoJ2NsaWNrJyk7XG5cdFx0JCgnI2JubS1yZWZyZXNoSXBCdCcpLm9mZignY2xpY2snKTtcblx0XHQkKCcjYm5tLXJlbW92ZUlwQnQnKS5vZmYoJ2NsaWNrJyk7XG5cdFx0JCgnI2JubS1yZW1vdmVBbGxJcEJ0Jykub2ZmKCdjbGljaycpO1xuXHRcdCQoJyNibm0tYmFuQnQnKS5vZmYoJ2NsaWNrJyk7XG5cblx0XHQvLyBIaWRlIGJhbiBwYW5lbFxuXHRcdCQoJyNibm0tYmFuTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuXG5cdFx0Ly8gUmVtb3ZlIHJvb20gY3JlYXRpb24gcGFuZWwgbGlzdGVuZXJcblx0XHQkKCcjYm5tLWJhbk1vZGFsJykub2ZmKCdoaWRkZW4uYnMubW9kYWwnKTtcblx0fVxuXG5cdG9uRXh0ZW5zaW9uQ29tbWFuZChjb21tYW5kLCBkYXRhKVxuXHR7XG5cdFx0Ly8gRGF0YSByZWNlaXZlZFxuXHRcdGlmIChjb21tYW5kID09IHRoaXMuUkVTUF9aT05FUylcblx0XHR7XG5cdFx0XHRsZXQgem9uZXMgPSBkYXRhLmdldFV0ZlN0cmluZ0FycmF5KCd6b25lcycpO1xuXG5cdFx0XHQvLyBJZiB3ZSBoYXZlIDEgem9uZSBvbmx5LCB3ZSB3aWxsIHNlbGVjdCBpdCBpbW1lZGlhdGVseVxuXHRcdFx0Y29uc3Qgc2VsZWN0Rmlyc3Rab25lID0gem9uZXMubGVuZ3RoID09IDE7XG5cblx0XHRcdC8vIFNvcnQgem9uZXMgbGlzdFxuXHRcdFx0em9uZXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuXHRcdFx0XHRyZXR1cm4gYS5sb2NhbGVDb21wYXJlKGIpO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIEFkZCBcIm5vbmVcIiB6b25lXG5cdFx0XHR6b25lcy51bnNoaWZ0KCdbbm9uZV0nKTtcblxuXHRcdFx0Ly8gU2V0IHpvbmUgZHJvcGRvd24gZGF0YXNvdXJjZVxuXHRcdFx0dGhpcy5fem9uZXNERC5zZXREYXRhU291cmNlKHpvbmVzKTtcblxuXHRcdFx0aWYgKHNlbGVjdEZpcnN0Wm9uZSlcblx0XHRcdHtcblx0XHRcdFx0dGhpcy5fem9uZXNERC5zZWxlY3QoMSk7XG5cdFx0XHRcdHRoaXMuX2dldEJhbm5lZFVzZXJuYW1lcygpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0XHR0aGlzLl96b25lc0RELnNlbGVjdCgwKTtcblx0XHR9XG5cblx0XHRlbHNlIGlmIChjb21tYW5kID09IHRoaXMuUkVTUF9VU0VSTkFNRVMpXG5cdFx0e1xuXHRcdFx0Ly8gU3Vic3RpdHV0ZSBncmlkJ3MgZGF0YSBzb3VyY2UsIHJldGFpbmluZyBjdXJyZW50IHNvcnRpbmdcblx0XHRcdGxldCBjdXJyU29ydCA9IHRoaXMuX25hbWVzR3JpZC5kYXRhU291cmNlLnNvcnQoKTtcblxuXHRcdFx0bGV0IGRzID0gbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7XG5cdFx0XHRcdHNjaGVtYToge1xuXHRcdFx0XHRcdG1vZGVsOiB7XG5cdFx0XHRcdFx0XHRmaWVsZHM6IHtcblx0XHRcdFx0XHRcdFx0ZXhwaXJhdGlvbkRhdGU6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiAnZGF0ZVRpbWUnLFxuXHRcdFx0XHRcdFx0XHRcdHBhcnNlOiBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIG1vbWVudChlLCAnREQvTU0vWVlZWSBISDptbScpLnRvRGF0ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0YmFuRGF0ZToge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6ICdkYXRlVGltZScsXG5cdFx0XHRcdFx0XHRcdFx0cGFyc2U6IGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gbW9tZW50KGUsICdERC9NTS9ZWVlZIEhIOm1tJykudG9EYXRlKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzb3J0OiBjdXJyU29ydCwgLy8gRklYTUUgRXhwZWN0ZWQgc29ydGluZyBkb2Vzbid0IHNlZW0gdG8gYmUgYXBwbGllZFxuXHRcdFx0XHRkYXRhOiB0aGlzLl9nZW5lcmF0ZUJhbm5lZEVudHJpZXMoZGF0YS5nZXRTRlNBcnJheSgndU5hbWVzJykpXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQXNzaWduIGRhdGEgc291cmNlIHRvIGdyaWRcblx0XHRcdHRoaXMuX25hbWVzR3JpZC5zZXREYXRhU291cmNlKGRzKTtcblxuXHRcdFx0Ly8gRW5hYmxlIHJlbW92ZSBhbGwgYnV0dG9uXG5cdFx0XHQkKCcjYm5tLXJlbW92ZUFsbE5hbWVzQnQnKS5hdHRyKCdkaXNhYmxlZCcsIGRzLnRvdGFsKCkgPT0gMClcblx0XHR9XG5cdFx0ZWxzZSBpZiAoY29tbWFuZCA9PSB0aGlzLlJFU1BfSVBBRERSRVNTRVMpXG5cdFx0e1xuXHRcdFx0Ly8gU3Vic3RpdHV0ZSBncmlkJ3MgZGF0YSBzb3VyY2UsIHJldGFpbmluZyBjdXJyZW50IHNvcnRpbmcgKEZJWClcblx0XHRcdGxldCBjdXJyU29ydCA9IHRoaXMuX2lwR3JpZC5kYXRhU291cmNlLnNvcnQoKTtcblxuXHRcdFx0bGV0IGRzID0gbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7XG5cdFx0XHRcdHNjaGVtYToge1xuXHRcdFx0XHRcdG1vZGVsOiB7XG5cdFx0XHRcdFx0XHRmaWVsZHM6IHtcblx0XHRcdFx0XHRcdFx0ZXhwaXJhdGlvbkRhdGU6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiAnZGF0ZVRpbWUnLFxuXHRcdFx0XHRcdFx0XHRcdHBhcnNlOiBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIG1vbWVudChlLCAnREQvTU0vWVlZWSBISDptbScpLnRvRGF0ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0YmFuRGF0ZToge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6ICdkYXRlVGltZScsXG5cdFx0XHRcdFx0XHRcdFx0cGFyc2U6IGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gbW9tZW50KGUsICdERC9NTS9ZWVlZIEhIOm1tJykudG9EYXRlKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzb3J0OiBjdXJyU29ydCwgLy8gRklYTUUgRXhwZWN0ZWQgc29ydGluZyBkb2Vzbid0IHNlZW0gdG8gYmUgYXBwbGllZFxuXHRcdFx0XHRkYXRhOiB0aGlzLl9nZW5lcmF0ZUJhbm5lZEVudHJpZXMoZGF0YS5nZXRTRlNBcnJheSgnSVBzJykpXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQXNzaWduIGRhdGEgc291cmNlIHRvIGdyaWRcblx0XHRcdHRoaXMuX2lwR3JpZC5zZXREYXRhU291cmNlKGRzKTtcblxuXHRcdFx0Ly8gRW5hYmxlIHJlbW92ZSBhbGwgYnV0dG9uXG5cdFx0XHQkKCcjYm5tLXJlbW92ZUFsbElwQnQnKS5hdHRyKCdkaXNhYmxlZCcsIGRzLnRvdGFsKCkgPT0gMClcblx0XHR9XG5cdH1cblxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBVSSBFVkVOVCBMSVNURU5FUlNcblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRfb25TaG93QmFuTW9kYWxDbGljaygpXG5cdHtcblx0XHQvLyBEaXNwbGF5IHpvbmUgbmFtZVxuXHRcdCQoJyNibm0tbW9kYWxab25lTGInKS50ZXh0KHRoaXMuX3pvbmVzREQudmFsdWUoKSlcblxuXHRcdC8vIERpc3BsYXkgYmFuIHBhbmVsXG5cdFx0JCgnI2JubS1iYW5Nb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG5cblx0XHQvLyBGb2N1cyBuYW1lIGZpZWxkXG5cdFx0JCgnI2JubS1tb2RhbE5hbWVJbicpLmZvY3VzKCk7XG5cdH1cblxuXHRfb25CYW5Nb2RhbEhpZGRlbihlKVxuXHR7XG5cdFx0Ly8gUmVzZXQgdmFsaWRhdG9yXG5cdFx0dGhpcy5fYmFuVmFsaWRhdG9yLmhpZGVNZXNzYWdlcygpO1xuXG5cdFx0Ly8gVGhlIG1ldGhvZCBhYm92ZSBkb2Vzbid0IHJlbW92ZSB0aGUgay1pbnZhbGlkIGNsYXNzZXMgYW5kIGFyaWEtaW52YWxpZD1cInRydWVcIiBhdHRyaWJ1dGVzIGZyb20gaW5wdXRzXG5cdFx0Ly8gTGV0J3MgZG8gaXQgbWFudWFsbHlcblx0XHQkKCcjYm5tLWJhbkZvcm0gLmstaW52YWxpZCcpLnJlbW92ZUNsYXNzKCdrLWludmFsaWQnKTtcblx0XHQkKCcjYm5tLWJhbkZvcm0gW2FyaWEtaW52YWxpZD1cInRydWVcIl0nKS5yZW1vdmVBdHRyKCdhcmlhLWludmFsaWQnKTtcblxuXHRcdC8vIFJlc2V0IGJhbiBmb3JtXG5cdFx0JCgnI2JubS1tb2RhbE5hbWVJbicpLnZhbCgnJyk7XG5cdFx0JCgnI2JubS1tb2RhbFJlYXNvbkluJykudmFsKCcnKTtcblx0XHQkKCcjYm5tLW1vZGFsTWVzc2FnZUluJykudmFsKCcnKTtcblxuXHRcdHRoaXMuX2JhbkRlbGF5SW4udmFsdWUoNSk7XG5cblx0XHQkKCdpbnB1dFtuYW1lPVwiZXhwaXJhdGlvblwiXScpLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKTtcblx0XHQkKCcjYm5tLWV4cGlyYXRpb25SQjAnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG5cblx0XHR0aGlzLl9iYW5FeHBIb3VySW4udmFsdWUoMSk7XG5cdFx0dGhpcy5fYmFuRXhwTWluSW4udmFsdWUoMCk7XG5cblx0XHR0aGlzLl9iYW5FeHBEYXRlSW4ubWluKHRoaXMuX3RvbW9ycm93KTtcblx0XHR0aGlzLl9iYW5FeHBEYXRlSW4udmFsdWUodGhpcy5fdG9tb3Jyb3cpO1xuXHR9XG5cblx0X29uQmFuQ2xpY2soKVxuXHR7XG5cdFx0aWYgKHRoaXMuX2JhblZhbGlkYXRvci52YWxpZGF0ZSgpKVxuXHRcdHtcblx0XHRcdC8vIFJldHJpZXZlIGJhbiBkZXRhaWxzXG5cdFx0XHRsZXQgcGFyYW1zID0gbmV3IFNGUzJYLlNGU09iamVjdCgpO1xuXG5cdFx0XHRwYXJhbXMucHV0VXRmU3RyaW5nKCd6b25lJywgdGhpcy5fem9uZXNERC52YWx1ZSgpKTtcblx0XHRcdHBhcmFtcy5wdXRVdGZTdHJpbmcoJ25hbWUnLCAkKCcjYm5tLW1vZGFsTmFtZUluJykudmFsKCkpO1xuXHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZygnbXNnJywgJCgnI2JubS1tb2RhbE1lc3NhZ2VJbicpLnZhbCgpKTtcblx0XHRcdHBhcmFtcy5wdXRJbnQoJ2RlbGF5JywgdGhpcy5fYmFuRGVsYXlJbi52YWx1ZSgpICE9IG51bGwgPyB0aGlzLl9iYW5EZWxheUluLnZhbHVlKCkgOiAwKTtcblx0XHRcdHBhcmFtcy5wdXRVdGZTdHJpbmcoJ3JlYXNvbicsICQoJyNibm0tbW9kYWxSZWFzb25JbicpLnZhbCgpKTtcblxuXHRcdFx0Y29uc3QgZXhwID0gJCgnaW5wdXRbbmFtZT1cImV4cGlyYXRpb25cIl06Y2hlY2tlZCcpLnZhbCgpO1xuXHRcdFx0bGV0IGR1cmF0aW9uID0gLTE7XG5cblx0XHRcdGlmIChleHAgPT0gJ2FmdGVyJylcblx0XHRcdHtcblx0XHRcdFx0Y29uc3QgaG91cnMgPSB0aGlzLl9iYW5FeHBIb3VySW4udmFsdWUoKSAhPSBudWxsID8gdGhpcy5fYmFuRXhwSG91ckluLnZhbHVlKCkgOiAwO1xuXHRcdFx0XHRjb25zdCBtaW51dGVzID0gdGhpcy5fYmFuRXhwTWluSW4udmFsdWUoKSAhPSBudWxsID8gdGhpcy5fYmFuRXhwTWluSW4udmFsdWUoKSA6IDA7XG5cblx0XHRcdFx0ZHVyYXRpb24gPSAoaG91cnMgKiA2MCkgKyBtaW51dGVzO1xuXG5cdFx0XHRcdGlmIChkdXJhdGlvbiA8PSAwKVxuXHRcdFx0XHRcdGR1cmF0aW9uID0gMTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGV4cCA9PSAnb24nKVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zdCBvbkRhdGUgPSBtb21lbnQodGhpcy5fYmFuRXhwRGF0ZUluLnZhbHVlKCkpO1xuXHRcdFx0XHRjb25zdCBub3cgPSBtb21lbnQoKTtcblxuXHRcdFx0XHRkdXJhdGlvbiA9IG9uRGF0ZS5zdGFydE9mKCdkYXknKS5kaWZmKG5vdy5zdGFydE9mKCdtaW51dGUnKSwgJ21pbnV0ZXMnKTtcblxuXHRcdFx0XHRpZiAoZHVyYXRpb24gPD0gMClcblx0XHRcdFx0XHRkdXJhdGlvbiA9IDE7XG5cdFx0XHR9XG5cblx0XHRcdHBhcmFtcy5wdXRJbnQoJ2R1ck1pbnMnLCBkdXJhdGlvbik7XG5cblx0XHRcdC8vIFNlbmQgYmFuIHJlcXVlc3QgdG8gc2VydmVyXG5cdFx0XHR0aGlzLnNlbmRFeHRlbnNpb25SZXF1ZXN0KHRoaXMuUkVRX0JBTiwgcGFyYW1zKTtcblxuXHRcdFx0Ly8gUmVmcmVzaCBsaXN0XG5cdFx0XHR0aGlzLl9nZXRCYW5uZWRVc2VybmFtZXMoKTtcblxuXHRcdFx0Ly8gRm9jdXMgdXNlcm5hbWUgZmllbGRcblx0XHRcdCQoJyNibm0tbW9kYWxOYW1lSW4nKS5mb2N1cygpO1xuXHRcdFx0JCgnI2JubS1tb2RhbE5hbWVJbicpLnNlbGVjdCgpO1xuXHRcdH1cblx0fVxuXG5cdF9vblpvbmVDaGFuZ2UoKVxuXHR7XG5cdFx0JCgnI2JubS1uYW1lc0J1dHRvbnMnKS5hdHRyKCdkaXNhYmxlZCcsIHRoaXMuX3pvbmVzREQuc2VsZWN0KCkgPT0gMCk7XG5cdFx0JCgnI2JubS1zaG93QmFuTW9kYWxCdCcpLmF0dHIoJ2Rpc2FibGVkJywgdGhpcy5fem9uZXNERC5zZWxlY3QoKSA9PSAwKTtcblxuXHRcdHRoaXMuX2dldEJhbm5lZFVzZXJuYW1lcygpO1xuXHR9XG5cblx0X29uTmFtZXNHcmlkU2VsZWN0aW9uQ2hhbmdlKClcblx0e1xuXHRcdC8vIEVuYWJsZS9kaXNhYmxlIHJlbW92ZSBidXR0b25cblx0XHRjb25zdCBzZWxlY3RlZFJvd3MgPSB0aGlzLl9uYW1lc0dyaWQuc2VsZWN0KCk7XG5cdFx0JCgnI2JubS1yZW1vdmVOYW1lQnQnKS5hdHRyKCdkaXNhYmxlZCcsIHNlbGVjdGVkUm93cy5sZW5ndGggPT0gMCk7XG5cdH1cblxuXHRfb25JcEdyaWRTZWxlY3Rpb25DaGFuZ2UoKVxuXHR7XG5cdFx0Ly8gRW5hYmxlL2Rpc2FibGUgcmVtb3ZlIGJ1dHRvblxuXHRcdGNvbnN0IHNlbGVjdGVkUm93cyA9IHRoaXMuX2lwR3JpZC5zZWxlY3QoKTtcblx0XHQkKCcjYm5tLXJlbW92ZUlwQnQnKS5hdHRyKCdkaXNhYmxlZCcsIHNlbGVjdGVkUm93cy5sZW5ndGggPT0gMCk7XG5cdH1cblxuXHRfb25SZWZyZXNoTmFtZXNDbGljaygpXG5cdHtcblx0XHR0aGlzLl9nZXRCYW5uZWRVc2VybmFtZXMoKTtcblx0fVxuXG5cdF9vblJlbW92ZU5hbWVzQ2xpY2soKVxuXHR7XG5cdFx0dGhpcy5zaGVsbEN0cmwuc2hvd0NvbmZpcm1XYXJuaW5nKGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVtb3ZlIHRoZSBiYW5uaW5nIGZvciB0aGUgc2VsZWN0ZWQgdXNlcm5hbWUke3RoaXMuX2lwR3JpZC5zZWxlY3QoKS5sZW5ndGggPiAxID8gJ3MnIDogJyd9P2AsICQucHJveHkodGhpcy5fb25SZW1vdmVOYW1lc0NvbmZpcm0sIHRoaXMpKTtcblx0fVxuXG5cdF9vblJlbW92ZU5hbWVzQ29uZmlybSgpXG5cdHtcblx0XHRsZXQgc2VsZWN0ZWRSb3dzID0gdGhpcy5fbmFtZXNHcmlkLnNlbGVjdCgpO1xuXHRcdGxldCB1c2VybmFtZXMgPSBbXTtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0ZWRSb3dzLmxlbmd0aDsgaSsrKVxuXHRcdHtcblx0XHRcdGxldCBkYXRhSXRlbSA9IHRoaXMuX25hbWVzR3JpZC5kYXRhSXRlbShzZWxlY3RlZFJvd3NbaV0pO1xuXHRcdFx0dXNlcm5hbWVzLnB1c2goZGF0YUl0ZW0ubmFtZSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fcmVxdWVzdEJhbm5lZFVzZXJzUmVtb3ZhbCh1c2VybmFtZXMsIHRoaXMuX3pvbmVzREQudmFsdWUoKSk7XG5cdH1cblxuXHRfb25SZW1vdmVBbGxOYW1lc0NsaWNrKClcblx0e1xuXHRcdHRoaXMuc2hlbGxDdHJsLnNob3dDb25maXJtV2FybmluZyhgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlbW92ZSBhbGwgYmFubmVkIHVzZXJuYW1lcz9gLCAkLnByb3h5KHRoaXMuX29uUmVtb3ZBbGxOYW1lc0NvbmZpcm0sIHRoaXMpKTtcblx0fVxuXG5cdF9vblJlbW92QWxsTmFtZXNDb25maXJtKClcblx0e1xuXHRcdHRoaXMuX3JlcXVlc3RCYW5uZWRVc2Vyc1JlbW92YWwobnVsbCwgdGhpcy5fem9uZXNERC52YWx1ZSgpKTtcblx0fVxuXG5cdF9vblJlZnJlc2hJcENsaWNrKClcblx0e1xuXHRcdHRoaXMuX2dldEJhbm5lZElQcygpO1xuXHR9XG5cblx0X29uUmVtb3ZlSXBDbGljaygpXG5cdHtcblx0XHR0aGlzLnNoZWxsQ3RybC5zaG93Q29uZmlybVdhcm5pbmcoYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZW1vdmUgdGhlIGJhbm5pbmcgZm9yIHRoZSBzZWxlY3RlZCBJUCBhZGRyZXNzJHt0aGlzLl9pcEdyaWQuc2VsZWN0KCkubGVuZ3RoID4gMSA/ICdlcycgOiAnJ30/YCwgJC5wcm94eSh0aGlzLl9vblJlbW92ZUlwQ29uZmlybSwgdGhpcykpO1xuXHR9XG5cblx0X29uUmVtb3ZlSXBDb25maXJtKClcblx0e1xuXHRcdGxldCBzZWxlY3RlZFJvd3MgPSB0aGlzLl9pcEdyaWQuc2VsZWN0KCk7XG5cdFx0bGV0IGlwQWRkcmVzc2VzID0gW107XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdGVkUm93cy5sZW5ndGg7IGkrKylcblx0XHR7XG5cdFx0XHRsZXQgZGF0YUl0ZW0gPSB0aGlzLl9pcEdyaWQuZGF0YUl0ZW0oc2VsZWN0ZWRSb3dzW2ldKTtcblx0XHRcdGlwQWRkcmVzc2VzLnB1c2goZGF0YUl0ZW0uaXBBZGRyZXNzKTtcblx0XHR9XG5cblx0XHR0aGlzLl9yZXF1ZXN0QmFubmVkSVBzUmVtb3ZhbChpcEFkZHJlc3Nlcyk7XG5cdH1cblxuXHRfb25SZW1vdmVBbGxJcENsaWNrKClcblx0e1xuXHRcdHRoaXMuc2hlbGxDdHJsLnNob3dDb25maXJtV2FybmluZyhgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlbW92ZSBhbGwgYmFubmVkIElQIGFkZHJlc3Nlcz9gLCAkLnByb3h5KHRoaXMuX29uUmVtb3ZBbGxJcENvbmZpcm0sIHRoaXMpKTtcblx0fVxuXG5cdF9vblJlbW92QWxsSXBDb25maXJtKClcblx0e1xuXHRcdHRoaXMuX3JlcXVlc3RCYW5uZWRJUHNSZW1vdmFsKG51bGwpO1xuXHR9XG5cblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gUFJJVkFURSBNRVRIT0RTXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0X2dldEJhbm5lZElQcygpXG5cdHtcblx0XHQvLyBSZW1vdmUgc2VsZWN0aW9uXG5cdFx0dGhpcy5faXBHcmlkLmNsZWFyU2VsZWN0aW9uKCk7XG5cblx0XHQvLyBDbGVhciBiYW5uZWQgSVBzIHRhYmxlXG5cdFx0dGhpcy5faXBHcmlkLnNldERhdGFTb3VyY2UoW10pO1xuXG5cdFx0Ly8gU2VuZCByZXF1ZXN0IHRvIGV4dGVuc2lvblxuXHRcdHRoaXMuc2VuZEV4dGVuc2lvblJlcXVlc3QodGhpcy5SRVFfR0VUX0lQQUREUkVTU0VTKTtcblx0fVxuXG5cdF9nZXRCYW5uZWRVc2VybmFtZXMoKVxuXHR7XG5cdFx0Ly8gUmVtb3ZlIHNlbGVjdGlvblxuXHRcdHRoaXMuX25hbWVzR3JpZC5jbGVhclNlbGVjdGlvbigpO1xuXG5cdFx0Ly8gQ2xlYXIgYmFubmVkIElQcyB0YWJsZVxuXHRcdHRoaXMuX25hbWVzR3JpZC5zZXREYXRhU291cmNlKFtdKTtcblxuXHRcdGlmICh0aGlzLl96b25lc0RELnNlbGVjdCgpID4gMClcblx0XHR7XG5cdFx0XHQvLyBHZXQgem9uZSBJRFxuXHRcdFx0bGV0IHBhcmFtcyA9IG5ldyBTRlMyWC5TRlNPYmplY3QoKTtcblx0XHRcdHBhcmFtcy5wdXRVdGZTdHJpbmcoJ3pvbmUnLCB0aGlzLl96b25lc0RELnZhbHVlKCkpO1xuXG5cdFx0XHQvLyBTZW5kIHJlcXVlc3QgdG8gZXh0ZW5zaW9uXG5cdFx0XHR0aGlzLnNlbmRFeHRlbnNpb25SZXF1ZXN0KHRoaXMuUkVRX0dFVF9VU0VSTkFNRVMsIHBhcmFtcyk7XG5cdFx0fVxuXHR9XG5cblx0X2dlbmVyYXRlQmFubmVkRW50cmllcyhiYW5EYXRhKVxuXHR7XG5cdFx0bGV0IGJhbm5lZEVudHJpZXMgPSBbXTtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgYmFuRGF0YS5zaXplKCk7IGkrKylcblx0XHR7XG5cdFx0XHRjb25zdCBidSA9IEJhbm5lZFVzZXIuZnJvbVNGU0FycmF5KGJhbkRhdGEuZ2V0U0ZTQXJyYXkoaSkpO1xuXHRcdFx0YmFubmVkRW50cmllcy5wdXNoKGJ1KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gYmFubmVkRW50cmllcztcblx0fVxuXG5cdF9yZXF1ZXN0QmFubmVkVXNlcnNSZW1vdmFsKHVzZXJuYW1lcywgem9uZSlcblx0e1xuXHRcdC8vIElmIHRoZSB1c2VybmFtZXMgYXJyYXkgaXMgbnVsbCwgc2VydmVyIHdpbGwgcmVtb3ZlIGFsbCBiYW5uZWQgdXNlcm5hbWVzXG5cdFx0bGV0IHBhcmFtcyA9IG5ldyBTRlMyWC5TRlNPYmplY3QoKTtcblx0XHRwYXJhbXMucHV0VXRmU3RyaW5nKCd6b25lJywgem9uZSk7XG5cblx0XHRpZiAodXNlcm5hbWVzID09IG51bGwpXG5cdFx0XHRwYXJhbXMucHV0TnVsbCgndU5hbWVzJyk7XG5cdFx0ZWxzZVxuXHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZ0FycmF5KCd1TmFtZXMnLCB1c2VybmFtZXMpO1xuXG5cdFx0dGhpcy5zZW5kRXh0ZW5zaW9uUmVxdWVzdCh0aGlzLlJFUV9SRU1PVkVfVVNFUk5BTUVTLCBwYXJhbXMpO1xuXHR9XG5cblx0X3JlcXVlc3RCYW5uZWRJUHNSZW1vdmFsKGlwQWRkcmVzc2VzKVxuXHR7XG5cdFx0Ly8gSWYgdGhlIHVzZXJuYW1lcyBhcnJheSBpcyBudWxsLCBzZXJ2ZXIgd2lsbCByZW1vdmUgYWxsIGJhbm5lZCB1c2VybmFtZXNcblx0XHRsZXQgcGFyYW1zID0gbmV3IFNGUzJYLlNGU09iamVjdCgpO1xuXG5cdFx0aWYgKGlwQWRkcmVzc2VzID09IG51bGwpXG5cdFx0XHRwYXJhbXMucHV0TnVsbCgnSVBzJyk7XG5cdFx0ZWxzZVxuXHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZ0FycmF5KCdJUHMnLCBpcEFkZHJlc3Nlcyk7XG5cblx0XHR0aGlzLnNlbmRFeHRlbnNpb25SZXF1ZXN0KHRoaXMuUkVRX1JFTU9WRV9JUEFERFJFU1NFUywgcGFyYW1zKTtcblx0fVxuXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIFBSSVZBVEUgR0VUVEVSU1xuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdGdldCBfdG9tb3Jyb3coKVxuXHR7XG5cdFx0bGV0IHRvbW9ycm93ID0gbW9tZW50KCkuYWRkKDEsICdkJyk7XG5cdFx0cmV0dXJuIHRvbW9ycm93LnRvRGF0ZSgpO1xuXHR9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUMxQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBIiwic291cmNlUm9vdCI6IiJ9